# 구현과제 4. Blackzack

> 이 과제는 [우아한테크코스 웹 프론트엔드 프리코스 미션 - 숫자 야구](https://github.com/woowacourse-precourse/javascript-baseball-6)를 모티브로 제작되었습니다.

## 유의사항

**읽기 좋은 코드**에 집중해주세요.

- 기능의 정상 동작 여부
- 작성하는 코드의 퀄리티
- Git 관리 수준
- PR, 코드 리뷰 방식

**README 작성**은 필수입니다.

- 자신의 코드에서 강조할 부분
- 자신의 코드에서 부족한 부분
- 기타 코드를 이해하는데 도움을 주는 내용

Fork & PR 등 과제 진행과 관련된 내용은,  
 [우테코 따라잡기 2 노션 - 구현과제 진행 관련 유의사항](https://yopark.notion.site/2386b22b37b643c5ac67a6db8350e027) 문서를 참고해주세요.

## 구현해야 할 기능

> Blackzack 시연 레포 : https://github.com/yoopark/not-woowacourse-4-blackzack-for-example

컴퓨터를 딜러로 하는 **블랙잭** 게임을 제작해야 합니다.

브라우저가 아니라 노드 환경에서 실행되는 프로그램입니다. (콘솔을 통해 소통)

다음의 **간소화된 블랙잭 룰**을 따릅니다.

1. 베팅

- 게임이 시작되기 전 플레이어는 베팅 금액을 정한다.
  - 이번 구현에서는, 초기 자본금을 `1,000,000원`으로 한다.
  - 이번 구현에서는, 최소 베팅금을 `10,000원`으로 하며 `1,000원` 단위로 베팅할 수 있도록 한다. (베팅금 상한 없음)

2. 카드 배분

- 딜러는 플레이어와 자신에게 각각 두 장의 카드를 나눠준다.
  - 플레이어 : 두 장 모두 오픈
  - 딜러 : 두 장 중 한 장만 오픈

3. 카드의 가치

- Ace : 1 또는 11 중 플레이어의 상황에 맞게 유리하게 사용할 수 있다.
- 페이스 카드(King, Queen, Jack) : 10
- 숫자 카드(2 ~ 10) : 카드에 적힌 숫자 그대로의 값

4. 플레이어의 선택

- 플레이어는 현재 카드의 합이 21 이하일 때 카드를 추가로 받을 수 있다.
  - **히트(Hit)** : 카드를 추가로 받겠다.
  - **스탠드(Stand)** : 카드를 그만 받겠다.
- 카드의 합이 21을 초과하면 즉시 패배(버스트, Bust)하게 되며, 베팅 금액을 모두 잃는다.

5. 초반 예외 상황

- **블랙잭(Blackjack)** : 처음 받은 2장의 카드가 `Ace + 페이스 카드` 조합인 경우를 일컬으며, 즉시 게임이 종료된다.
  - 딜러도 블랙잭인 경우 : 무승부(푸시, Push)
  - 그 외 : 베팅 금액의 1.5배를 추가로 얻는다. (3 to 2)

6. 승패 결정

- 플레이어가 버스트한 경우에는 **즉시 패배**한다.
- 플레이어가 스탠드한 후, 딜러는 뒤집었던 카드를 공개하고 다음의 규칙에 따라 카드를 받는다.
  - 딜러의 카드 합이 16 이하 : 반드시 히트
  - 딜러의 카드 합이 17 이상 : 반드시 스탠드
  - 이때, Ace는 11로 간주한다.
- 승패는 다음 기준에 따른다.
  - 딜러가 버스트 : 승리(베팅 금액을 추가로 얻는다, 1 to 1)
  - `딜러의 카드 합 < 플레이어의 카드 합` : 승리(배팅 금액을 추가로 얻는다, 1 to 1)
  - `딜러의 카드 합 = 플레이어의 카드 합` : 무승부(베팅 금액 전액을 돌려받는다)
  - `딜러의 카드 합 > 플레이어의 카드 합` : 패배(베팅 금액을 잃는다)

7. 카드 카운팅

- 이번 구현에서는, 1덱(조커를 제외한 52장)만을 사용하며, 카드를 모두 소진하면 새 덱을 사용한다.
  - 통상적으로는 카드 카운팅을 어렵게 하기 위해 4 ~ 8덱을 셔플하여 사용한다.

> 블랙잭을 소재로 한 영화 <21>을 추천합니다 🃏  
> [무비프라임 유튜브, 라스베가스를 털어버린 MIT 천재들 실화 (결말포함)](https://youtu.be/_DO5S-mia3s)

## 입출력 예시

Phase 1. _오프닝_

**입력**  
없음

**출력**

```
블랙잭 게임을 시작합니다.
현재 자본금은 1,000,000원입니다.
```

Phase 2. _베팅_

**입력**

- 베팅 금액

```
베팅 금액을 입력해주세요 : 240000
```

**출력**

- 유효한 입력인 경우 : 다음 플로우로 넘어간다

기타 에러 상황

- 현재 자본금을 초과하는 경우

```
베팅하려는 금액이 자본금보다 큽니다.
```

- 최소 베팅 금액 미만인 경우

```
최소 베팅 금액은 10,000원입니다.
```

- 1,000원 단위가 아닌 경우

```
베팅 금액은 1,000원 단위로 입력해야 합니다.
```

Phase 3. _최초 분배_

**입력**  
없음

**출력**

```
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 2하트입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 7클로버, A하트입니다.
```

- 나눠주는 도중 카드가 모두 소진된 경우

```
새로운 덱을 셔플 중입니다.
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 2하트입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 7클로버, A하트입니다.
```

```
딜러가 카드를 1장 받았습니다.
새로운 덱을 셔플 중입니다.
딜러가 카드를 1장 받았습니다.
딜러가 공개한 카드는 2하트입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 7클로버, A하트입니다.
```

```
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 2하트입니다.
내가 카드를 1장 받았습니다.
새로운 덱을 셔플 중입니다.
내가 카드를 1장 받았습니다.
내가 받은 카드는 7클로버, A하트입니다.
```

- 블랙잭인 경우 (승리)

```
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 2하트입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 A클로버, K다이아몬드입니다.
축하합니다! 블랙잭입니다.
딜러가 남은 카드를 공개합니다. 딜러가 공개한 카드는 6스페이드입니다.
WINNER WINNER CHICKEN DINNER! 베팅 금액의 1.5배를 추가로 받습니다.
현재 자본금은 880,000원입니다.
```

- 블랙잭인 경우 (무승부)

```
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 A하트입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 A클로버, K다이아몬드입니다.
축하합니다! 블랙잭입니다.
딜러가 남은 카드를 공개합니다. 딜러가 공개한 카드는 J스페이드입니다.
딜러도 블랙잭입니다.
무승부입니다. 베팅 금액을 돌려받습니다.
현재 자본금은 580,000원입니다.
```

Phase 4. _스탠드/히트_

**입력**

- 동작 결정

```
동작을 결정하세요(히트/스탠드) : 히트
```

**출력**

- 히트한 경우

```
동작을 결정하세요(히트/스탠드) : 히트
J하트를 받았습니다.
동작을 결정하세요(히트/스탠드) :
```

- 히트한 경우 (버스트)

```
동작을 결정하세요(히트/스탠드) : 히트
J하트를 받았습니다.
버스트입니다. 베팅 금액을 잃습니다.
```

- 스탠드한 경우

```
동작을 결정하세요 : 스탠드
내 카드의 합은 18입니다.
```

- 스탠드한 경우 (Ace 포함)

```
동작을 결정하세요 : 스탠드
A하트는 1로 간주됩니다. 내 카드의 합은 18입니다.
```

```
동작을 결정하세요 : 스탠드
A하트는 11로 간주됩니다. A스페이드는 1로 간주합니다. 내 카드의 합은 18입니다.
```

Ace가 여러장인 경우 가장 처음 받은 Ace를 11로 간주한다.

Phase 5. _딜러 동작_

**입력**  
없음

**출력**

```
딜러가 남은 카드를 공개합니다. 딜러가 공개한 카드는 2클로버입니다.
딜러가 히트하였습니다. A스페이드를 받았습니다.
딜러가 스탠드하였습니다. 딜러 카드의 합은 21입니다.
```

패배한 경우

```
패배하였습니다. 베팅 금액을 잃습니다.
현재 자본금은 580,000원입니다.
```

승리한 경우

```
WINNER WINNER CHICKEN DINNER! 베팅 금액을 추가로 받습니다.
현재 자본금은 580,000원입니다.
```

무승부인 경우

```
무승부입니다. 베팅 금액을 돌려받습니다.
현재 자본금은 580,000원입니다.
```

Phase 6. _엔딩_

**입력**

- 게임 진행 여부

```
게임을 계속하려면 1, 종료하려면 2를 입력하세요.
1
```

- 현재 자본금이 최소 베팅 금액 미만인 경우

```
현재 자본금이 최소 베팅 금액인 10,000원보다 적으므로 블랙잭 게임을 종료합니다.
최종 자본금은 8,000원입니다.
```

**출력**

- 계속하는 경우

```
게임을 계속하려면 1, 종료하려면 2를 입력하세요.
1
블랙잭 게임을 시작합니다.
```

- 종료하는 경우

```
게임을 계속하려면 1, 종료하려면 2를 입력하세요.
2
블랙잭 게임을 종료합니다.
최종 자본금은 880,000원입니다.
```

- 잘못된 입력

```
게임을 계속하려면 1, 종료하려면 2를 입력하세요.
곰
잘못된 입력입니다.
```

**실행 결과 예시**

```
블랙잭 게임을 시작합니다.
현재 자본금은 1,000,000원입니다.
베팅 금액을 입력해주세요 : 420000
새로운 덱을 셔플 중입니다.
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 8스페이드입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 7클로버, A하트입니다.
동작을 결정하세요(히트/스탠드) : 히트
J하트를 받았습니다.
동작을 결정하세요 : 스탠드
A하트는 1로 간주됩니다. 내 카드의 합은 18입니다.
딜러가 남은 카드를 공개합니다. 딜러가 공개한 카드는 2클로버입니다.
딜러가 히트하였습니다. A스페이드를 받았습니다.
딜러가 스탠드하였습니다. 딜러 카드의 합은 21입니다.
패배하였습니다. 베팅 금액을 잃습니다.
현재 자본금은 580,000원입니다.
게임을 계속하려면 1, 종료하려면 2를 입력하세요.
1
현재 자본금은 580,000원입니다.
베팅 금액을 입력해주세요 : 200000
딜러가 카드를 2장 받았습니다.
딜러가 공개한 카드는 2하트입니다.
내가 카드를 2장 받았습니다.
내가 받은 카드는 A클로버, K다이아몬드입니다.
축하합니다! 블랙잭입니다.
딜러가 남은 카드를 공개합니다. 딜러가 공개한 카드는 6스페이드입니다.
WINNER WINNER CHICKEN DINNER! 베팅 금액의 1.5배를 추가로 받습니다.
현재 자본금은 880,000원입니다.
게임을 계속하려면 1, 종료하려면 2를 입력하세요.
...
```

## 기술 스택 관련 제한사항

- 이번 과제에서는, 의존성 패키지를 변경할 수 없습니다. 순수 Vanila JavaScript로 구현하여야 합니다. (Lodash 등 설치 금지)
- `index.js`를 수정하지 마세요. `npm run build`, `npm run start`를 차례대로 입력하여 프로그램을 번들 및 실행할 수 있습니다.
- 프로그램 종료 시 `process.exit()`을 호출하지 마세요.
- `__tests__` 폴더에 기작성된 테스트 코드를 모두 통과해야 합니다. `npm run test`를 입력하여 테스트할 수 있습니다.
